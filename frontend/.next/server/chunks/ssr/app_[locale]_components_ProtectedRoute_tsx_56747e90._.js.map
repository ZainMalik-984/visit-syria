{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zahid/OneDrive/Desktop/Nextjs/Next%20Django/frontend/app/%5Blocale%5D/components/ProtectedRoute.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useSelector } from 'react-redux'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useEffect, useState } from 'react'\r\nimport { RootState } from '@/_lib/store/store'\r\n\r\nexport default function ProtectedRoute({\r\n    children,\r\n    requireAuth = true,\r\n    allowedRoles = [],\r\n}: {\r\n    children: React.ReactNode\r\n    requireAuth?: boolean\r\n    allowedRoles?: string[]\r\n}) {\r\n    const { isAuthenticated, role, isInitialized } = useSelector(\r\n        (state: RootState) => state.auth\r\n    )\r\n    const router = useRouter()\r\n    const [authorized, setAuthorized] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (!isInitialized) return\r\n\r\n        // ----- auth check -----\r\n        if (requireAuth && !isAuthenticated) {\r\n            router.replace('/login')\r\n            setAuthorized(false)\r\n            return\r\n        }\r\n\r\n        // ----- role check -----\r\n        if (allowedRoles.length && !allowedRoles.includes(role || '')) {\r\n            router.replace('/unauthorized') // or '/'\r\n            setAuthorized(false)\r\n            return\r\n        }\r\n\r\n        // passed all gates\r\n        setAuthorized(true)\r\n    }, [isAuthenticated, role, requireAuth, allowedRoles, router])\r\n\r\n    // show nothing (or a spinner) while deciding or redirecting\r\n    if (!authorized) return null\r\n\r\n    return <>{children}</>\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAOe,SAAS,eAAe,EACnC,QAAQ,EACR,cAAc,IAAI,EAClB,eAAe,EAAE,EAKpB;IACG,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,yJAAA,CAAA,cAAW,AAAD,EACvD,CAAC,QAAqB,MAAM,IAAI;IAEpC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,IAAI,CAAC,eAAe;QAEpB,yBAAyB;QACzB,IAAI,eAAe,CAAC,iBAAiB;YACjC,OAAO,OAAO,CAAC;YACf,cAAc;YACd;QACJ;QAEA,yBAAyB;QACzB,IAAI,aAAa,MAAM,IAAI,CAAC,aAAa,QAAQ,CAAC,QAAQ,KAAK;YAC3D,OAAO,OAAO,CAAC,iBAAiB,SAAS;;YACzC,cAAc;YACd;QACJ;QAEA,mBAAmB;QACnB,cAAc;IAClB,GAAG;QAAC;QAAiB;QAAM;QAAa;QAAc;KAAO;IAE7D,4DAA4D;IAC5D,IAAI,CAAC,YAAY,OAAO;IAExB,qBAAO;kBAAG;;AACd","debugId":null}}]
}
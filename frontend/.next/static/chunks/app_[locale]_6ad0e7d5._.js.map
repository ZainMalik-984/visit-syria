{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zahid/OneDrive/Desktop/Nextjs/Next%20Django/frontend/app/%5Blocale%5D/components/ProtectedRoute.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useSelector } from 'react-redux'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useEffect, useState } from 'react'\r\nimport { RootState } from '@/_lib/store/store'\r\n\r\nexport default function ProtectedRoute({\r\n    children,\r\n    requireAuth = true,\r\n    allowedRoles = [],\r\n}: {\r\n    children: React.ReactNode\r\n    requireAuth?: boolean\r\n    allowedRoles?: string[]\r\n}) {\r\n    const { isAuthenticated, role, isInitialized } = useSelector(\r\n        (state: RootState) => state.auth\r\n    )\r\n    const router = useRouter()\r\n    const [authorized, setAuthorized] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (!isInitialized) return\r\n\r\n        // ----- auth check -----\r\n        if (requireAuth && !isAuthenticated) {\r\n            console.log('ProtectedRoute: Not authenticated, redirecting to login')\r\n            router.replace('/login')\r\n            setAuthorized(false)\r\n            return\r\n        }\r\n\r\n        // ----- role check -----\r\n        if (allowedRoles.length && !allowedRoles.includes(role || '')) {\r\n            router.replace('/') // or '/'\r\n            setAuthorized(false)\r\n            return\r\n        }\r\n\r\n        // passed all gates\r\n        setAuthorized(true)\r\n    }, [isAuthenticated, role, requireAuth, allowedRoles, router, isInitialized])\r\n\r\n    // show nothing (or a spinner) while deciding or redirecting\r\n    if (!authorized) return null\r\n\r\n    return <>{children}</>\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAOe,SAAS,eAAe,EACnC,QAAQ,EACR,cAAc,IAAI,EAClB,eAAe,EAAE,EAKpB;;IACG,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,4JAAA,CAAA,cAAW,AAAD;sCACvD,CAAC,QAAqB,MAAM,IAAI;;IAEpC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACN,IAAI,CAAC,eAAe;YAEpB,yBAAyB;YACzB,IAAI,eAAe,CAAC,iBAAiB;gBACjC,QAAQ,GAAG,CAAC;gBACZ,OAAO,OAAO,CAAC;gBACf,cAAc;gBACd;YACJ;YAEA,yBAAyB;YACzB,IAAI,aAAa,MAAM,IAAI,CAAC,aAAa,QAAQ,CAAC,QAAQ,KAAK;gBAC3D,OAAO,OAAO,CAAC,KAAK,SAAS;;gBAC7B,cAAc;gBACd;YACJ;YAEA,mBAAmB;YACnB,cAAc;QAClB;mCAAG;QAAC;QAAiB;QAAM;QAAa;QAAc;QAAQ;KAAc;IAE5E,4DAA4D;IAC5D,IAAI,CAAC,YAAY,OAAO;IAExB,qBAAO;kBAAG;;AACd;GAzCwB;;QAS6B,4JAAA,CAAA,cAAW;QAG7C,qIAAA,CAAA,YAAS;;;KAZJ","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/zahid/OneDrive/Desktop/Nextjs/Next%20Django/frontend/app/%5Blocale%5D/dashboard/page.tsx"],"sourcesContent":["'use client' // Added to enable client-side hooks like useTranslations\r\n\r\nimport ProtectedRoute from \"@/components/ProtectedRoute\";\r\nimport { useTranslations } from 'next-intl'; // Added for translations\r\n\r\nexport default function DashboardPage() {\r\n  const t = useTranslations('dashboard'); // Namespace to 'dashboard' in JSON\r\n    \r\n  return (\r\n    <ProtectedRoute requireAuth={true} allowedRoles={['supplier', 'Customer']}>\r\n      <main className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-indigo-50 to-purple-50 dark:from-zinc-900 dark:via-zinc-950 dark:to-black px-4\">\r\n        <div className=\"w-full max-w-lg space-y-6 rounded-2xl bg-white/80 dark:bg-zinc-800/75 backdrop-blur shadow-2xl ring-1 ring-zinc-200/60 dark:ring-zinc-700/60 p-8 animate-fadeIn\">\r\n          <h1 className=\"text-center text-2xl font-bold text-indigo-600 dark:text-indigo-400\">\r\n            {t('title')}\r\n          </h1>\r\n          <p className=\"text-center text-sm text-zinc-600 dark:text-zinc-400\">\r\n            {t('welcome')}\r\n          </p>\r\n        </div>\r\n      </main>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA,2VAA6C,yBAAyB;;;AAHtE,aAAa,yDAAyD;;;;AAKvD,SAAS;;IACtB,MAAM,IAAI,CAAA,GAAA,yMAAA,CAAA,kBAAe,AAAD,EAAE,cAAc,mCAAmC;IAE3E,qBACE,6LAAC,qJAAA,CAAA,UAAc;QAAC,aAAa;QAAM,cAAc;YAAC;YAAY;SAAW;kBACvE,cAAA,6LAAC;YAAK,WAAU;sBACd,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCACX,EAAE;;;;;;kCAEL,6LAAC;wBAAE,WAAU;kCACV,EAAE;;;;;;;;;;;;;;;;;;;;;;AAMf;GAjBwB;;QACZ,yMAAA,CAAA,kBAAe;;;KADH","debugId":null}}]
}